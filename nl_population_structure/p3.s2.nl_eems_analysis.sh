#!/bin/bash

###############################################################################
## producing the .outer file, the coordinate limits for the EEMS algorithm
echo "-55.949138 51.744449
-56.278728 51.649115
-56.652263 51.485218
-56.981853 51.320729
-57.223552 51.196974
-57.509196 50.823708
-57.794841 50.531311
-57.948649 50.321340
-58.168376 49.941043
-58.322185 49.742661
-58.497966 49.400683
-58.673747 49.185728
-58.959392 48.969836
-59.288981 48.781970
-59.486735 48.578864
-59.552653 48.404121
-59.596599 48.243410
-59.596599 48.082193
-59.618571 47.832042
-59.574626 47.506519
-59.376872 47.417387
-58.975898 47.323128
-58.591377 47.352908
-58.239814 47.404984
-57.437812 47.404984
-57.097236 47.397547
-56.767646 47.323128
-56.514961 47.188907
-56.218330 46.979444
-56.053535 46.829323
-55.712959 46.723988
-55.350410 46.723988
-54.976875 46.784205
-54.702217 46.806769
-54.339668 46.731519
-53.878242 46.603353
-53.570625 46.520261
-53.109199 46.520261
-52.768623 46.550491
-52.581855 46.723988
-52.515937 46.941953
-52.515937 47.151564
-52.461006 47.367792
-52.428047 47.590548
-52.395088 47.782839
-52.461006 47.996481
-52.603828 48.282405
-52.746650 48.486701
-52.874880 48.861672
-53.017702 49.056439
-53.204470 49.271955
-53.428921 49.416263
-53.648648 49.566126
-53.725552 49.779420
-53.857388 49.906948
-54.110074 49.963519
-54.637417 50.048251
-54.917886 50.090794
-55.291422 50.182338
-55.445230 50.343870
-55.456217 50.525812
-55.368326 50.762683
-55.297326 51.022386
-55.154504 51.263625
-55.000695 51.483085
-54.901818 51.640173
-54.879846 51.783127
-54.879846 51.932404
-54.967736 52.067681
-55.121545 52.101436
-55.330285 52.101436
-55.506066 52.027141
-55.681848 51.952721
-55.791711 51.837467
-55.949138 51.744449" > $sequence.geog-filtered.outer

###############################################################################
# filter for individuals with geographic data
sequence=NL-ancestry

# it appears that PLINK is indeed in SNP_major_mode by default
plink --bfile $sequence.filtered-cleaned \
  --keep $sequence.geog-filtered.idfile \
  --make-bed --out $sequence.geog-filtered
